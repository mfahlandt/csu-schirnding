{{ define "main" }}
<div class="container py-5">
    <div class="row text-center mb-5">
        <div class="col-lg-8 mx-auto">
            <h1 class="display-4 text-csu-blue">{{ .Title }}</h1>
            <p class="lead text-muted">Beitr√§ge in dieser Kategorie.</p>
        </div>
    </div>

    <div class="row g-4">
        {{ $today := now.Format "2006-01-02" | time }}
        {{ $allTermine := where .Pages "Type" "termine" }}
        {{ $upcomingTermine := where $allTermine ".Params.eventDate" "ge" $today }}
        {{ range $upcomingTermine.ByParam "eventDate" }}
        <div class="col-lg-4 col-md-6">
            <div class="card h-100">
                {{ if .Params.image }}
                <a href="{{ .Permalink }}">
                    <img src="{{ .Params.image | relURL }}" class="card-img-top" alt="{{ .Title }}" style="height: 200px; object-fit: cover;">
                </a>
                {{ end }}
                <div class="card-body d-flex flex-column">
                    <small class="text-muted mb-2">{{ .Params.eventDate | time.Format "02. Januar 2006" }}</small>
                    <h5 class="card-title"><a href="{{ .Permalink }}" class="text-decoration-none text-dark">{{ .Title }}</a></h5>
                    <p class="card-text text-muted flex-grow-1">{{ .Summary | truncate 150 }}</p>
                    <a href="{{ .Permalink }}" class="text-csu-blue fw-bold text-decoration-none mt-3">Weiterlesen &rarr;</a>
                </div>
            </div>
        </div>
        {{ end }}
    </div>

    <div class="row mt-5">
        <div class="col-12">
            {{ template "_internal/pagination.html" . }}
        </div>
    </div>
</div>
{{ end }}
