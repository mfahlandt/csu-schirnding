{{ define "main" }}
<div class="container py-5">
    {{/* Page Header */}}
    <div class="row text-center mb-4">
        <div class="col-lg-8 mx-auto">
            <h1 class="display-4 text-csu-blue">{{ .Title }}</h1>
            {{ with .Params.subtitle }}
            <p class="lead text-muted">{{ . }}</p>
            {{ end }}
        </div>
    </div>

    {{/* Sticky Jump Navigation */}}
    <div class="row justify-content-center mb-5">
        <div class="col-auto">
            <div class="jump-nav">
                <a href="#buergermeister" class="jump-nav-link">Bürgermeister</a>
                <a href="#gemeinderat" class="jump-nav-link">Gemeinderat</a>
                <a href="#schwerpunkte" class="jump-nav-link">Schwerpunkte</a>
                <a href="#kreistag" class="jump-nav-link">Kreistag</a>
            </div>
        </div>
    </div>

    {{/* Main Content (Mayor's Letter) */}}
    <div class="row mb-5">
        <div class="col-lg-8 mx-auto">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4 p-md-5">
                    <div class="content">
                        {{ .Content }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr class="my-5">

    {{/* Mayor Candidate Section */}}
    <div id="buergermeister" style="scroll-margin-top: 100px;">
        {{ range .Site.Data.buergermeister }}
        <div class="row mb-5 align-items-center bg-light p-4 p-md-5 rounded">
            <div class="col-12 text-center mb-4">
                <h2 class="text-csu-blue">{{ $.Site.Params.kommunalwahl.mayorCandidateTitle | default "Unser Bürgermeisterkandidat" }}</h2>
            </div>
            <div class="col-md-4 text-center">
                <div class="candidate-image-wrapper d-inline-block position-relative">
                    {{ if .image }}
                    <img src="{{ .image | relURL }}" class="img-fluid rounded-circle shadow-sm" alt="{{ .name }}" style="max-width: 250px;">
                    {{ else }}
                    <img src="https://via.placeholder.com/250x250.png?text=Kein+Bild" class="img-fluid rounded-circle shadow-sm" alt="{{ .name }}">
                    {{ end }}
                </div>
            </div>
            <div class="col-md-8">
                <h3 class="fw-bold">{{ .name }}</h3>
                <p class="lead text-csu-green fst-italic">"{{ .slogan }}"</p>
                <p>{{ .beschreibung }}</p>
            </div>
        </div>
        {{ end }}
    </div>

    {{/* Local Council Candidates Section */}}
    <div id="gemeinderat" style="scroll-margin-top: 100px;">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="mb-4 text-csu-blue">{{ $.Site.Params.kommunalwahl.localCandidatesTitle | default "Unsere Kandidaten für den Gemeinderat" }}</h2>
            </div>
        </div>
        <div class="row g-4 justify-content-center">
            {{ range .Site.Data.gemeinderat }}
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 text-center candidate-card">
                    <div class="listenplatz-badge">{{ .listenplatz }}</div>
                    {{ if .image }}
                    <img src="{{ .image | relURL }}" class="card-img-top" alt="{{ .name }}">
                    {{ else }}
                    <img src="https://via.placeholder.com/400x400.png?text=Kein+Bild" class="card-img-top" alt="{{ .name }}">
                    {{ end }}
                    <div class="card-body pt-4">
                        <h5 class="card-title mt-3 mb-1">{{ .name }}</h5>

                        {{/* Beruf und Alter */}}
                        {{ if or .beruf .alter }}
                        <p class="text-muted small mb-2">
                            {{ if .beruf }}
                            <span class="me-2"><i class="fas fa-briefcase me-1"></i>{{ .beruf }}</span>
                            {{ end }}
                            {{ if .alter }}
                            <span><i class="fas fa-birthday-cake me-1"></i>{{ .alter }} Jahre</span>
                            {{ end }}
                        </p>
                        {{ end }}

                        {{ if .quote }}
                        <p class="text-muted fst-italic">"{{ .quote }}"</p>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}
        </div>
    </div>

    <hr class="my-5">

    {{/* Goals Section - Now data-driven */}}
    <div id="schwerpunkte" style="scroll-margin-top: 100px;">
        <div class="row g-4 text-center mt-5">
            <div class="col-12 text-center mb-4">
                <h2 class="text-csu-blue">{{ $.Site.Params.kommunalwahl.goalsTitle | default "Unsere Schwerpunkte" }}</h2>
            </div>
            {{ range .Site.Data.schwerpunkte }}
            <div class="col-md-4">
                <div class="card h-100 p-3">
                    <div class="card-body">
                        <i class="{{ .icon }} fa-3x text-csu-blue mb-3"></i>
                        <h5 class="card-title">{{ .title }}</h5>
                        <p class="card-text">{{ .description }}</p>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>
    </div>

    <hr class="my-5">

    {{/* County Council Candidate Section */}}
    <div id="kreistag" style="scroll-margin-top: 100px;">
        {{ range .Site.Data.kreistag }}
        <div class="row mb-5 align-items-center bg-light p-4 p-md-5 rounded">
            <div class="col-12 text-center mb-4">
                <h2 class="text-csu-blue">{{ $.Site.Params.kommunalwahl.countyCandidateTitle | default "Unser Kandidat für den Kreistag" }}</h2>
            </div>
            <div class="col-md-4 text-center">
                <div class="candidate-image-wrapper d-inline-block position-relative round-image"> {{/* Added round-image class here */}}
                    <div class="listenplatz-badge">{{ .listenplatz }}</div>
                    <img src="{{ .image | relURL }}" class="img-fluid rounded-circle shadow-sm" alt="{{ .name }}" style="max-width: 250px;">
                </div>
            </div>
            <div class="col-md-8">
                <h3 class="fw-bold">{{ .name }}</h3>
                <p class="lead text-csu-green fst-italic">"{{ .slogan }}"</p>
                <p>{{ .beschreibung }}</p>
            </div>
        </div>
        {{ end }}
    </div>

    {{/* Call to Action */}}
    <div class="row mt-5">
        <div class="col-lg-8 mx-auto text-center bg-light p-5 rounded">
            <h3>Gestalten Sie mit!</h3>
            <p>Haben Sie Ideen oder Anliegen für die Zukunft von Schirnding? Sprechen Sie uns an – wir freuen uns auf den Dialog mit Ihnen!</p>
            <a href="/kontakt" class="btn btn-csu btn-lg">Jetzt Kontakt aufnehmen</a>
        </div>
    </div>
</div>
{{ end }}
